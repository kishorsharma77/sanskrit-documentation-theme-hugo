<script type="text/javascript">
  let baseURL = "{{.Site.BaseURL}}";
  let basePath = baseURL.split("/").slice(2).join("/");
  let siteParams = JSON.parse("{{.Site.Params | jsonify}}");
  let pageParams = JSON.parse("{{.Page.Params | jsonify}}");
  let pageDefaultsList = JSON.parse({{.Site.Data.page_defaults | jsonify}});
  let sidebarsData = JSON.parse("{{$.Site.Data.sidebars | jsonify}}");
  let autocompletePageUrl = "{{ "data/pages.tsv" | relURL }}";

  var pageUrlToTitle = {};
  // Note that only pages parsed and generated by jekyll are processed below - not ready files like pdf-s and htmls.
  {{ range $.Site.Pages  }}
  {{ if isset .Params "title"  }}
  {{ $absUrl := .URL | absURL }}
  {{ $urlMinusBase := replace $absUrl .Site.BaseURL "/" }}
  pageUrlToTitle["{{$urlMinusBase}}"] = "{{.Params.title}}";
  {{ end }}
  {{ end }}

  // For directory listing:
  var pageDirectoryToUrl = {};
  for (var pageUrl in pageUrlToTitle) {
      if(pageUrlToTitle.hasOwnProperty(pageUrl)) {
          var dirPath = pageUrl.split("/").slice(0,-2).join("/");
          if (pageDirectoryToUrl.hasOwnProperty(dirPath)) {
              pageDirectoryToUrl[dirPath].push(pageUrl);
          } else {
              pageDirectoryToUrl[dirPath] = [pageUrl];
          }
      }
  }

</script>
